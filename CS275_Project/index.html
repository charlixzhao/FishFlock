<h1 id="simulating-schooling-behavior-of-fish-with-unreal-engine-5">Simulating Schooling Behavior of Fish with Unreal Engine 5</h1>

<h2 id="abstract">Abstract</h2>
<p>In this project we use Unreal Engine 5 to
    simulate the schooling behavior of prey fishes
    as a flock. The prey flock performs different
    escaping or defensing maneuver in reaction of the
    predatorâ€™s movement and surrounding environments. The simulation is divided
    into multiple layers. The fundamental layer
    contains the basic rule of the prey flock that needs to be followed under all
    circumstances, which includes collision detection and
    avoidance, prey-to-prey perception and communi-
    cation system, and Boids algorithm for the prey
    fishes to maintain as a single flock. On top of that,
    we then implemented different maneuvers
    of the prey fish in reaction to the three different
    predator behaviors, which are predator-present,
    predator-chase, and predator-attack.</p>

<h3 id="member">Team Members (names in alphabetical order):</h2>
<p> Bodong Wang, Penghai Wei, Xiaoxiang Zhao, Yuxin Wang <br>
    005523428, &nbsp &nbsp 105726519, &nbsp &nbsp 205059635,  &nbsp &nbsp 905129084 <br>
</p>

<h2 id="report">Report</h2>
<p>
This is our project report in the local folder.
<br>
<a href="./CS_275_Report.pdf">Project Report</a>
</p>

<h2 id="source-code-">Source code</h2>
<p><a href="https://github.com/charlixzhao/FishFlock">https://github.com/charlixzhao/FishFlock</a></p>
<p>Note: The source codes and materials together are roughly 4Gbs, which is too big to upload to BruinLearn. 
<br>
Running the source code requires installing unreal engine 5.0. To run the source code, first clone the directory to your disk. Then right-click the FishFlock.uproject and click &quot;Generate Visual Studio project files,&quot; which will generate a .sln project file in the current folder. Double click the generated .sln to open it with visual studio. Change the build target to FishFlock and then compile and run, which should open the unreal editor.  </p>

<h2 id="executable-link">Executable Link</h2>
<p><a href="https://drive.google.com/file/d/1jnnI7lPkXXNE5jlP09CD8YzGAhu9LOJc/view?usp=sharing">https://drive.google.com/file/d/1jnnI7lPkXXNE5jlP09CD8YzGAhu9LOJc/view?usp=sharing</a></p>
<p>Note: the executable only supports Windows. Mac and Linux are not supported yet. Just download the .zip file and unzip it. Go into the Windows folder and double-click on FishFlock.exe, which should open the game.</p>

<h2 id="images">Representative Images</h2>
<p>The following images shows some key concepts or progress of our project:</p>

<h3 id="framework-images">Environmental and Framework Images</h3>
<p>This is the underwater environment we created for our fish eco-system.
<figure>  
	<img src="./images/HD_underwater_scene.png" alt="Underwater Environment" width="960" height="512"> 
    <figcaption>Underwater Environment</figcaption>
</figure></p>

<p>This image showcases our visual ray casting system.
<figure>  
	<img src="./images/vision.png" alt="Visual Ray Casting" width="746" height="433"> 
    <figcaption>Visual Ray Casting</figcaption>
</figure></p>

<h3 id="framework-images">State Transition Logics</h3>
<p>This image is a peak into our transition system between state and maneuvers.
<figure>  
	<img src="./images/state_machine.jpg" alt="State Transition" width="746" height="433"> 
    <figcaption>State Transition System</figcaption>
</figure></p>

<h3 id="concept-images">Attack Avoidance Maneuver Concept Figure</h3>
<p>The prey fishes (red)
scatter toward all direction.
<figure>  
	<img src="./images/flash.jpg" alt="Flash Maneuver" width="256" height="256"> 
    <figcaption>Flash Maneuver Concept Figure</figcaption>
</figure></p>
<p>The prey fishes (red) divide into two groups, then escape and join behind the predator (black) in a circular trajectory.
<figure>  
	<img src="./images/fountain.jpg" alt="Fountain Maneuver" width="256" height="256"> 
    <figcaption>Fountain Maneuver Concept Figure</figcaption>
</figure></p>
<p>The prey fishes
(red) are turning left, or have turned left and are
running away from the predator (black).
<figure>  
	<img src="./images/hourglass.jpg" alt="Hourglass Maneuver" width="256" height="256"> 
    <figcaption>Hourglass Maneuver Concept Figure</figcaption>
</figure></p>
<p>
The prey fishes (red)
split into two group and follow the leader to escape
toward opposite directions.
<figure>  
	<img src="./images/split.jpg" alt="Split Maneuver" width="256" height="256"> 
    <figcaption>Split Maneuver Concept Figure</figcaption>
</figure></p>


<h2 id="demo-collection">Demo Video Collection</h2>
<p>Note: This is just a complete collection of demo videos. Please refer to the Report for the context of these demos and a detailed explanation of them. These links are also referenced in the Report. </p>

<ul>

<b>Fish Flock Behavior during Sequence of Attacks 1</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/4aK0wNTZcnM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Fish Flock Behavior during Sequence of Attacks 2</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ir7nHqwAIjE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Predator Control</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/McvCW7zVCOE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Follow spline with collision avoidance</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/DskCWU9RzFY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Fast Avoid + Skitter Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/mWJpQPLezk4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Ball Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/7goSQ_9y52w" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Hourglass Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/2V6tJh3SHx0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Herd Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/qpZLZ-LvWck" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Fountain Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_8RndcoU2VU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Flash Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nN8nNBvJbYc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<br><br><b>Split Maneuver</b><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/pMg9R8dhVFk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

</ul>
